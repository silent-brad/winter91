{% extends "partials/_master.jinja" %}

{% block title %}Log In{% endblock %}

{% block content %}
<article class="form-container">
  <section>
    <h1>Log In</h1>
    <p>Welcome back to Winter91!</p>
  </section>

  {% if error_message.is_some() %}
	<div class="error">
	  {{error_message.get()}}
	</div>
  {% endif %}

  {% if success_message.is_some() %}
	<div class="success">
	  {{success_message.get()}}
	</div>
  {% endif %}

  <div id="message-container"></div>

  <form method="post" action="/login" hx-post="/login" hx-target="#message-container" hx-swap="innerHTML">
    <label for="email">
      Email
      <input
        type="email"
        id="email"
        name="email"
        placeholder="Enter your email"
        {% if email.is_some() %}value="{{email.get()}}"{% endif %}
        required
        autofocus
      >
    </label>

    <label for="password">
      Password
      <div class="password-field">
        <input
          type="password"
          id="password"
          name="password"
          placeholder="Enter your password"
          required
        >
        <button type="button" class="password-toggle" onclick="togglePasswordVisibility('password')">
          <span class="toggle-icon">ğŸ‘ï¸</span>
        </button>
      </div>
    </label>

    <button type="submit">Log In</button>
  </form>

  <footer class="text-center">
    <p>
      Don't have an account? 
      <a href="/signup">Sign up here</a>
    </p>
    <p>If you need to change your password, email <a href="mailto:brad@knightoffaith.systems">brad@knightoffaith.systems</a></p>
  </footer>
</article>
{% endblock %}
